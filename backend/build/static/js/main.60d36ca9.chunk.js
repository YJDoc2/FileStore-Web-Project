(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{42:function(e,t,a){e.exports=a(72)},48:function(e,t,a){},49:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(22),s=a.n(r),c=(a(47),a(48),a(49),a(9)),o=a.n(c),i=a(25),u=a(2),m=a(3),d=a(5),p=a(4),f=a(6),h=a(7),b=a(17),g=a(15),v=a.n(g),E=(a(53),Object(n.createContext)()),y=E.Provider,j=E.Consumer,O=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).loginLink=l.a.createElement(h.b,{className:"nav-item nav-link ml-auto",style:{fontSize:"1.5rem"},to:"/login"},"Login/Signup"),a.logoutLink=l.a.createElement(h.b,{className:"nav-item nav-link ml-auto",to:"/",style:{fontSize:"1.5rem"},onClick:a.context.logout},"Logout"),a.collectionLink=l.a.createElement(h.b,{to:"/collections",className:"nav-item nav-link ml-auto",style:{fontSize:"1.5rem"}},"Collections"),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(j,null,(function(t){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light d-flex",style:{backgroundColor:"#e3f2fd"}},l.a.createElement(h.b,{className:"navbar-brand ",style:{fontSize:"2rem"},to:"/"},"FileStore"),t.state.isLoggedIn?l.a.createElement("div",{className:"nav-item ml-auto ",style:{fontSize:"1.5rem"}},"Welcome, ",t.state.user.username):null,t.state.isLoggedIn?e.collectionLink:null,t.state.isLoggedIn?e.logoutLink:e.loginLink)}))}}]),t}(n.Component);O.contextType=E,O.protoTypes={loggedIn:v.a.bool.isRequired,handleLogout:v.a.func.isRequired};var w=O,x=a(16),N=a(1),S=a(10),C=a.n(S),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(N.a)({},a.state,Object(x.a)({},e.target.name,e.target.value)))},a.handleSubmit=function(e,t){var n;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),a.setState(Object(N.a)({},a.state,{info:"Sending..."})),""!==a.state.username.trim()&&""!==a.state.password1.trim()&&""!==a.state.password2.trim()){t.next=4;break}return t.abrupt("return",a.setState(Object(N.a)({},a.state,{err:"Please Fill All Details"})));case 4:if(a.state.password1===a.state.password2){t.next=6;break}return t.abrupt("return",a.setState(Object(N.a)({},a.state,{err:"Passwords Does not Match"})));case 6:return t.prev=6,t.next=9,o.a.awrap(C.a.post("/api/user/register",{username:a.state.username,password:a.state.password1}));case 9:n=t.sent,a.setState({username:"",password1:"",password2:"",err:null,info:"Sucessful!"}),a.context.setUser(n.data.user),a.props.history.push("/"),t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(6),t.abrupt("return",a.setState(Object(N.a)({},a.state,{info:null,err:t.t0.response?t.t0.response.data.err:t.t0.message})));case 18:case"end":return t.stop()}}),null,null,[[6,15]])},a.state={info:null,err:null,username:"",password1:"",password2:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=null,t=null;return null!==this.state.err&&(e=l.a.createElement("div",{className:" p-2 mb-3 rounded bg-danger text-white text-center"},this.state.err)),null!==this.state.info&&(t=l.a.createElement("div",{className:" p-2 mb-3 rounded bg-info text-white text-center"},l.a.createElement("h3",null,this.state.info))),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-md-flex p-5 mb-5",style:{backgroundColor:"#F2F1F1"}},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"mb-3 text-center"},l.a.createElement("h2",null,"Register")),t,e,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Username"),l.a.createElement("input",{className:"form-control",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),l.a.createElement("small",{className:"form-text text-muted"},"Usename Should be unique")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{className:"form-control",type:"password",name:"password1",value:this.state.password1,onChange:this.handleChange}),l.a.createElement("small",{className:"form-text text-muted"},"Use a Strong password!")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Confirm Password"),l.a.createElement("input",{className:"form-control",type:"password",name:"password2",value:this.state.password2,onChange:this.handleChange}),l.a.createElement("small",{className:"form-text text-muted"},"Just Checking...!")),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Register"})))))}}]),t}(n.Component);k.contextType=E;var F=Object(b.g)(k),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(N.a)({},a.state,Object(x.a)({},e.target.name,e.target.value)))},a.handleSubmit=function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),a.setState(Object(N.a)({},a.state,{info:"Sending..."})),""!==a.state.username.trim()&&""!==a.state.password.trim()){n.next=4;break}return n.abrupt("return",a.setState(Object(N.a)({},a.state,{err:"Please Fill All Details"})));case 4:return n.prev=4,n.next=7,o.a.awrap(C.a.post("/api/user/login",{username:a.state.username,password:a.state.password}));case 7:t=n.sent,a.setState({username:"",password:"",err:null,info:"Sucessful!"}),a.context.setUser(t.data.user),a.props.history.push("/"),n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(4),n.abrupt("return",a.setState(Object(N.a)({},a.state,{info:null,err:n.t0.response?n.t0.response.data.err:n.t0.message})));case 16:case"end":return n.stop()}}),null,null,[[4,13]])},a.state={info:null,err:null,username:"",password:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=null,t=null;return null!==this.state.err&&(e=l.a.createElement("div",{className:" p-2 mb-3 rounded bg-danger text-white text-center"},this.state.err)),null!==this.state.info&&(t=l.a.createElement("div",{className:" p-2 mb-3 rounded bg-info text-white text-center"},l.a.createElement("h3",null,this.state.info))),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-md-flex p-5 mb-5",style:{backgroundColor:"#F2F1F1"}},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"mb-3 text-center"},l.a.createElement("h2",null,"Log IN")),t,e,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Username"),l.a.createElement("input",{className:"form-control",type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{className:"form-control",type:"password",name:"password",value:this.state.password1,onChange:this.handleChange})),l.a.createElement("div",{className:"p-5"}),l.a.createElement("div",{className:"p-4"}),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Log In"})))))}}]),t}(n.Component);T.contextType=E;var D=Object(b.g)(T),L=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"d-md-flex flex-row mb-3 justify-content-around"},l.a.createElement(F,null),l.a.createElement(D,null))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={source:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get(this.props.path,{responseType:"arraybuffer"}).then((function(t){var a=btoa(new Uint8Array(t.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));e.setState({source:"data:;base64,"+a})})).catch((function(e){console.log(e.response)}))}},{key:"render",value:function(){var e=this.props.thumbnail?"card-img-top img-thumbnail":"img-fluid",t=this.props.thumbnail?{height:"12rem"}:{};return l.a.createElement("img",{className:e,style:t,src:this.state.source,alt:this.props.alt})}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteFile=function(){a.context.deleteFile(a.state.file)},a.getSizeText=function(e){return e/1024<1?e+" Bytes":e/1048576<1?Math.ceil(e/1024)+" KBs":e/1073741824<1?Math.ceil(e/1048576)+" MBs":void 0},a.state={file:e.file},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.file;return l.a.createElement("div",{className:"card h-100"},"jpeg"===e.ext||"png"===e.ext||"jpg"===e.ext?l.a.createElement(A,{path:"/api/files/".concat(e.dbfilename),thumbnail:!0,alt:e.originalname}):null,l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},e.originalname),l.a.createElement("p",null,"Size : ",this.getSizeText(e.size),l.a.createElement("br",null),"Uploaded on :",new Date(e.date).toDateString()),l.a.createElement(h.b,{style:{width:"100%"},className:"btn btn-primary m-1",to:{pathname:"/file/".concat(e.dbfilename),state:{file:e}}},"Open in Browser"),l.a.createElement(h.b,{style:{width:"100%"},className:"btn btn-success m-1",to:"/api/download/".concat(e.dbfilename),target:"_blank",download:e.originalname},"Download"),this.props.collection?null:l.a.createElement(h.b,{style:{width:"100%"},className:"btn btn-danger m-1",to:"/",onClick:this.deleteFile},"Delete")))}}]),t}(n.Component);B.contextType=E;var M=B,U=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(j,null,(function(e){return l.a.createElement("div",{className:"row m-2"},e.state.user.files.map((function(e){return l.a.createElement("div",{key:e.dbfilename,className:"col-sm-6 col-md-4 col-lg-4 my-2"},l.a.createElement(M,{file:e,collection:!1}))})))}))}}]),t}(n.Component);U.contextType=E;var I=U,P=a(20),z=a.n(P),G=a(19),J=a.n(G),R=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={files:null,info:null},a.fileAddHandler=function(e){for(var t=0,n=0;n<e.target.files.length;n++)t+=e.target.files.size;if(t>2e7-a.context.state.user.usedSpace){var l="Cannot upload as these new files will exceed your allowed space...\ncurrent used space : ".concat(a.context.state.user.usedSpace/1e6," out of 20MB\nSize of Intended Upload : ").concat(t/1e6);return a.setState(Object(N.a)({},a.state,{info:l}))}a.setState(Object(N.a)({},a.state,{input:e.target,info:null,files:e.target.files}))},a.submitFiles=function(e){var t,n;return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,null!==a.state.files){e.next=3;break}return e.abrupt("return",a.setState(Object(N.a)({},a.state,{info:"Please Select Files"})));case 3:for(n=0;n<a.state.files.length;n++)t.append("files",a.state.files[n]);J.a.ajax({type:"POST",url:"/api/upload/files",xhrFields:{withCredentials:!0},data:t,contentType:!1,processData:!1,cache:!1,success:function(e){a.setState({info:"Successfully uploaded",files:e.files,key:Date.now()}),a.context.addFiles(e.files);var t=a.state.input;t.value="",setTimeout((function(){a.setState(Object(N.a)({},a.state,{info:null,input:t}))}),500)},error:function(e){var t=e.responseJSON?e.responseJSON.err:null;console.log(e),a.setState(Object(N.a)({},a.state,{info:t||"Unknown Error Occurred"}))}});case 5:case"end":return e.stop()}}))},a.inputForm=l.a.createElement("div",null,l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"custom-file"},l.a.createElement("input",{type:"file",multiple:!0,formEncType:"multipart/form-data",className:"custom-file-input",id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04",onChange:a.fileAddHandler}),l.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile04"},"Choose file")),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{className:"btn btn-success",type:"button",id:"inputGroupFileAddon04",onClick:a.submitFiles},"Upload")))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){z.a.init()}},{key:"render",value:function(){var e=null;null!==this.state.info&&(e=l.a.createElement("div",{className:" p-2 mb-3 mt-2 rounded bg-info text-white text-center"},this.state.info));var t=null;return t=this.context.state.isLoggedIn?l.a.createElement("div",{className:"container mt-3"},this.inputForm,e,this.context.state.user.files?l.a.createElement(I,null):null):l.a.createElement(b.a,{to:"/"}),l.a.createElement(l.a.Fragment,null,t)}}]),t}(n.Component);R.contextType=E;var W=R,H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).staticText=l.a.createElement("div",{className:"container mt-5 "},l.a.createElement("h4",null,"FileStore is a cloud file storing and sharing platform. It uses Atlas MongoDB to store and Share Files."),l.a.createElement("h5",null,"This is a small scale project done using ExpressJs Backend, ReactJs frontend Mongoose ODM,Bootstrap Css"),l.a.createElement("h5",null,"Log in to Store your files. Files can be stored in two ways : in Personal Account, Which can be accessed only by the user uploading it, and in Collections, which can be Shared and viewed by others."),l.a.createElement("h5",null,"A single User can have 20MB of files in private , and any collection can have Maximum of 20MB of files in it."),l.a.createElement("br",null),l.a.createElement("h5",null,"There are still many bugs and feature updates possible. Few of them are :",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"The File upload does not clear itself after uploading files, even though there are no Files still assosiated with it ."),l.a.createElement("br",null),l.a.createElement("li",null,"The Collections are static, as in once created and uploaded, files cannot be added or removed from them.This was not done as the collection files are showed on same route for all viewers, logged in as well as not. The logic to check whether a collection belongs to current logged in user , so only creater can have update rights was becoming complecated."),l.a.createElement("br",null),l.a.createElement("li",null,"The npm package 'react-file-viewer' used to display some file types does not scale the pages of pdf well, which is an internal issue of package."),l.a.createElement("br",null),l.a.createElement("li",null,"The GridFS-Stream package used in the backend uses outdated drivers,and thus does not support some updated methods of mongoDB. A possible solution would be to change the package used or create a custom interface over MongoDB Grid interface."),l.a.createElement("br",null),l.a.createElement("li",null,"The Backend cannot currently limit incoming files in uploading other than the size less than 20MB. Thus a user may extend the allowed space by using REST clients such as Postman to upload files. This may be stopped using cors. Currently the file size per user is checked and handled by frontend before upload."))),l.a.createElement("h5",null,"Check the Github Repository here :"," ",l.a.createElement("a",{href:"https://github.com/YJDoc2/FileStore-Web-Project"},"FileStore Github Repository"))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(j,null,(function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),t.state.isLoggedIn?l.a.createElement(W,null):e.staticText)}))}}]),t}(n.Component);H.contextType=E;var q=H,V=a(40),K=a.n(V),Y=a(41),$=a.n(Y),_=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container mt-3"},"Sorry, We do not support ",e.fileType," for in-browser Display"))},Q=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).staticComponents=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement("div",{className:"d-flex justify-content-between m-2"},l.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:a.props.history.goBack},"Back"),l.a.createElement("h2",null,a.state.file.originalname),l.a.createElement("div",null)))};var n=a.props.match.params.filename,r=a.props.location.state.file;return a.state={filename:n,file:r,img:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=$.a.extname(this.state.filename).toLowerCase().substring(1);if("png"===t||"jpeg"===t||"jpg"===t){var a=l.a.createElement(A,{path:"/api/files/".concat(this.state.filename),thumbnail:!1,alt:this.state.file.originalname});this.setState(Object(N.a)({},this.state,{img:a}))}else if(/txt|html|htm|css|js|json|c|cpp|java|py|sh/.test(t))C.a.get("/api/files/".concat(this.state.filename)).then((function(t){var a=t.data.split(/\r\n|\r|\n/).length;e.setState(Object(N.a)({},e.state,{text:l.a.createElement("textarea",{className:"w-100",value:t.data,readOnly:!0,rows:1.5*a,style:{resize:"none",border:"none"}})}))})).catch((function(t){t.response.data.err&&e.setState(Object(N.a)({},e.state,{info:t.response.data.err})),console.log(t)}));else{var n=l.a.createElement(K.a,{fileType:t,filePath:"/api/files/".concat(this.state.filename),unsupportedComponent:_});this.setState(Object(N.a)({},this.state,{fView:n}))}}},{key:"render",value:function(){var e,t=this;return e="coll"===this.state.filename.substring(0,4)||this.context.state.isLoggedIn&&this.context.state.user.files.some((function(e){return e.dbfilename===t.state.filename}))?l.a.createElement(l.a.Fragment,null,this.staticComponents(),this.state.info,l.a.createElement("div",{className:"container w-100 mt-2 text-center"},this.state.img,this.state.text,this.state.fView)):l.a.createElement(b.a,{to:"/"}),l.a.createElement(l.a.Fragment,null,e)}}]),t}(n.Component);Q.contextType=E;var X=Object(b.g)(Q),Z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={},a.deleteCollection=function(){a.context.deleteCollection(a.props.name)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.name,t=this.context.state.user.collections,a=t[0],n=t.filter((function(t){return t.name===e})).length;return l.a.createElement("div",{className:"card h-100"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},e),l.a.createElement("p",null,"Number of Files : ",n,l.a.createElement("br",null),"Uploaded on :",new Date(a.date).toDateString()),l.a.createElement(h.b,{style:{width:"100%"},className:"btn btn-primary m-1",to:{pathname:"/collection/".concat(e)}},"View"),l.a.createElement("button",{style:{width:"100%"},className:"btn btn-danger m-1",onClick:this.deleteCollection},"Delete")))}}]),t}(n.Component);Z.contextType=E;var ee=Z,te=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).fileAddHandler=function(e){for(var t=0,n=0;n<e.target.files.length;n++)t+=e.target.files.size;if(t>2e7){return a.setState(Object(N.a)({},a.state,{info:"Cannot upload as Maximum allowed space for a single collection is 20MB"}))}a.setState(Object(N.a)({},a.state,{input:e.target,info:null,files:e.target.files}))},a.submitFiles=function(e){var t,n;return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,null!==a.state.files){e.next=3;break}return e.abrupt("return",a.setState(Object(N.a)({},a.state,{info:"Please Select Files"})));case 3:for(n=0;n<a.state.files.length;n++)t.append("files",a.state.files[n]);J.a.ajax({type:"POST",url:"/api/upload/collection/".concat(a.state.name),xhrFields:{withCredentials:!0},data:t,contentType:!1,processData:!1,cache:!1,success:function(e){a.setState({info:"Successfully uploaded",files:e.files,key:Date.now()}),a.context.addCollection(e.files),setTimeout((function(){a.setState(Object(N.a)({},a.state,{info:null}))}),500)},error:function(e){var t=e.responseJSON?e.responseJSON.err:null;console.log(e),a.setState(Object(N.a)({},a.state,{info:t||"Unknown Error Occurred"}))}});case 5:case"end":return e.stop()}}))},a.handleChange=function(e){a.setState(Object(N.a)({},a.state,Object(x.a)({},e.target.name,e.target.value)))},a.inputForm=l.a.createElement("div",null,l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"custom-file"},l.a.createElement("input",{type:"file",multiple:!0,formEncType:"multipart/form-data",className:"custom-file-input",id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04",onChange:a.fileAddHandler}),l.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile04"},"Choose file")),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{className:"btn btn-success",type:"button",id:"inputGroupFileAddon04",onClick:a.submitFiles},"Upload")))),a.state={name:"",files:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){z.a.init()}},{key:"render",value:function(){var e;return this.context.state.isLoggedIn&&(e=new Set,this.context.state.user.collections.forEach((function(t){e.add(t.name)}))),l.a.createElement("div",null,this.context.state.isLoggedIn?l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),this.state.info,l.a.createElement("div",{className:"container"},l.a.createElement(h.b,{to:"/",className:"btn btn-primary btn-block mt-2"},"Home")),l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Collection Name : "),l.a.createElement("input",{className:"form-control",type:"text",name:"name",value:this.state.name,onChange:this.handleChange})),this.inputForm),l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row m-2"},Array.from(e).map((function(e){return l.a.createElement("div",{key:e,className:"col-sm-6 col-md-4 col-lg-4 my-2"},l.a.createElement(ee,{name:e}))}))))):l.a.createElement(b.a,{to:"/"}))}}]),t}(n.Component);te.contextType=E;var ae=te,ne=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).props.match.params.name;return a.state={name:n,createrName:"",files:null,noColl:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("/api/collection/".concat(this.state.name)).then((function(t){var a=t.data.collection,n=a.creater;e.setState(Object(N.a)({},e.state,{createrName:n,files:a.files}))})).catch((function(t){console.log(t),t.response.data.success||e.setState(Object(N.a)({},e.state,{noColl:!0}))}))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),this.state.noColl?l.a.createElement("div",{className:"container mt-2 text-center"},l.a.createElement("h1",null,"Sorry, No collection With name '",this.state.name,"' Exists.")):l.a.createElement("div",{className:"container mt-2 text-center"},l.a.createElement("div",{className:"d-flex justify-content-between "},l.a.createElement("button",{className:"btn btn-primary  px-2",onClick:this.props.history.goBack},"Back"),l.a.createElement("div",null,l.a.createElement("h2",null,"Collection ",this.state.name),l.a.createElement("h4",null,"Created by : ",this.state.createrName)),l.a.createElement("div",null)),this.state.files?l.a.createElement("div",{className:"row m-2"},this.state.files.map((function(t){return l.a.createElement("div",{key:t.dbfilename,className:"col-sm-6 col-md-4 col-lg-4 my-2"},l.a.createElement(M,{file:t,collection:!0,collName:e.state.name}))}))):null))}}]),t}(n.Component),le=Object(b.g)(ne),re=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement("div",{className:"container mt-2"},l.a.createElement("h1",null,"Sorry, We cant find what you are Looking for..."),l.a.createElement("h3",null,"Please check the URL...")))},se=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={user:null,isLoggedIn:!1},a.addFiles=function(e){var t,n=a.state.user;(t=n.files).push.apply(t,Object(i.a)(e)),a.setState({user:n,isLoggedIn:!0})},a.addCollection=function(e){var t,n=a.state.user;(t=n.collections).push.apply(t,Object(i.a)(e)),a.setState({user:n,isLoggedIn:!0})},a.deleteCollection=function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(C.a.delete("/api/collection/".concat(e)));case 3:t=n.sent,a.setUser(t.data.user),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a.setUser=function(e){if(null===e||void 0===e)return a.logout();a.setState({user:e,isLoggedIn:!0})},a.logout=function(){a.setState({user:null,isLoggedIn:!1})},a.deleteFile=function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(C.a.delete("/api/files/".concat(e.dbfilename)));case 3:t=n.sent,a.setUser(t.data.user),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){C.a.defaults.withCredentials=!0}},{key:"render",value:function(){return l.a.createElement(y,{value:{state:this.state,setUser:this.setUser,logout:this.logout,addFiles:this.addFiles,deleteFile:this.deleteFile,addCollection:this.addCollection,deleteCollection:this.deleteCollection}},l.a.createElement(h.a,null,l.a.createElement(b.d,null,l.a.createElement(b.b,{exact:!0,path:"/",component:q}),l.a.createElement(b.b,{exact:!0,path:"/login",component:L}),l.a.createElement(b.b,{exact:!0,path:"/file/:filename",component:X}),l.a.createElement(b.b,{exact:!0,path:"/collection/:name",component:le}),l.a.createElement(b.b,{exact:!0,path:"/collections",component:ae}),l.a.createElement(b.b,{component:re}))))}}]),t}(n.Component);var ce=function(){return l.a.createElement(se,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.60d36ca9.chunk.js.map